{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="{% static 'styles/style.css' %}">
  <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
  <title>Paraparapu Chethi | {{ tag_name }} News</title>
  <script defer src="{% static 'js/app.js' %}"></script>
  <script id='pixel-script-poptin' src='https://cdn.popt.in/pixel.js?id=6962185e8c1c0' async='true'></script>
</head>

<body>
  <!-- Header Section -->
  <header class="header">
    <div class="container">
      <div class="header__inner">
        <a href="{% url 'news' %}" class="header__logo">
          <img src="{% static 'images/lo.png' %}" alt="Logo" />
        </a>
        <nav class="header__nav">
          <ul class="header__list">
            <li class="header__item"><a href="{% url 'news' %}" class="header__link">Home</a></li>
            <li class="header__item"><a href="{% url 'new-news' %}" class="header__link">New</a></li>
            
            <li class="header__item">
              <a href="{% url 'magazine_page'%}" class="header__link">Magazines</a>
            </li>
            <li class="header__item header__dropdown">
              <a href="#" class="header__link">Categories</a>
              <ul class="dropdown-menu">
                {% for tag in tags %}
                  <li><a href="{% url 'news-by-tag' tag.name %}" class="dropdown-item">{{ tag.name }}</a></li>
                {% endfor %}
              </ul>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </header>
  
  <nav class="mobile-nav" id="mobile-nav">
    <ul class="mobile-nav__list">
      <li class="mobile-nav__item">
        <a href="{% url 'news' %}" class="mobile-nav__link">Home</a>
      </li>
      <li class="mobile-nav__item">
        <a href="{% url 'new-news' %}" class="mobile-nav__link">New</a>
      </li>
      <li class="mobile-nav__item">
        <a href="{% url 'magazine_page' %}" class="mobile-nav__link">Magazines</a>
      </li>
      <li class="mobile-nav__item header__item header__dropdown mobile-nav__link">
          <a href="#" class="header__link mobile-nav__link">Categories</a>
            <ul class="dropdown-menu">
              {% for tag in tags %}
                <li><a class="dropdown-item" href="{% url 'news-by-tag' tag.name %}">{{ tag.name }}</a></li>
              {% endfor %}
            </ul>
          
      </li>
    </ul>
  </nav>

  <!-- Main Content -->
  <main class="container" style="padding: 40px 20px;">
    <h1 style="font-size: 3.5rem; margin-bottom: 30px; font-weight: bold; text-align: center;">
      {{ tag_name }} News
    </h1>

    <section class="news-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px;">
      {% for item in news %}
        <article class="news-card" style="background: #fff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05);">
          {% if item.thumbnail %}
            <img src="{{ item.thumbnail.url }}" alt="{{ item.title }}" style="width: 100%; height: 200px; object-fit: cover;">
          {% else %}
            <img src="{% static 'images/d.jpg' %}" alt="No Image" style="width: 100%; height: 200px; object-fit: cover;">
          {% endif %}
          <div style="padding: 20px;">
            <h2 style="font-size: 1.25rem; margin-bottom: 10px;">
              <a href="{% url 'single-news' item.id %}" style="color: #222; text-decoration: none;">
                {{ item.title|truncatewords:12 }}
              </a>
            </h2>
            <p style="font-size: 0.95rem; color: #555;">
              {{ item.description|truncatewords:20 }}
            </p>
            <p style="font-size: 0.85rem; margin-top: 10px; color: #888;">
              {{ item.published_date|date:"F j, Y" }}
            </p>
          </div>
        </article>
      {% empty %}
        <p style="font-size: 1.2rem; text-align: center; color: #555;">No news found under this tag.</p>
      {% endfor %}
    </section>
  </main>
</body>

</html>
